---
import type { CollectionEntry } from "astro:content";
import BaseLayout from "./BaseLayout.astro";
import SidebarLayout from "./SidebarLayout.astro";
import Badge from "@components/shared/Badge.astro";

export interface Props {
	entry: CollectionEntry<"analysis">;
}

const { entry } = Astro.props;
const { Content, headings } = await entry.render();
---

<BaseLayout>
	<div
		class="flex flex-col justify-center items-center bg-gradient-to-r from-pink-900 to-indigo-900 mb-4 rounded-md py-8 px-16"
	>
		<h2 class="text-white font-bold text-3xl mb-3 font-serif">
			{entry.data.title}
		</h2>
		<p class="text-neutral-200">{entry.data.author}</p>
		{
			entry.data.description && (
				<p class=" tracking-tighter text-neutral-300">
					{entry.data.description}
				</p>
			)
		}
	</div>
	<SidebarLayout>
		<div slot="sidebar">
			<h2 class="text-2xl font-bold mb-2 tracking-tighter">
				Table of Contents
			</h2>
			<ul class="mb-5">
				{
					headings.map((heading) => (
						<li class="text-lg p-2 rounded-lg hover:bg-slate-200 transition duration-200 ">
							<a href={`#${heading.slug}`}>{heading.text}</a>
						</li>
					))
				}
			</ul>
			{
				entry.data.exports.length > 0 && (
					<a href={`/playground/${entry.slug}`}>
						<Badge class="bg-blue-200 text-blue-800">
							Playground
						</Badge>
					</a>
				)
			}
		</div>
		<div slot="main">
			<Content />
		</div>
	</SidebarLayout>
	<!-- <PyscriptPlayground exports={entry.data.exports} client:only="react" /> -->
</BaseLayout>
